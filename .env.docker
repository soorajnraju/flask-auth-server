# =============================================================================
# Docker Environment Configuration - Enterprise Flask Authorization Server
# =============================================================================
# 
# This file contains environment variables for Docker deployment
# Copy to .env for local development or use with docker-compose
# =============================================================================

# =============================================================================
# BUILD CONFIGURATION
# =============================================================================
BUILD_DATE=2025-11-02T00:00:00Z
VCS_REF=main
VERSION=1.0.0

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
# Flask Environment
FLASK_ENV=production
FLASK_DEBUG=False
APP_PORT=5001

# Application Metadata
APP_NAME=Enterprise Authorization Server
APP_ENVIRONMENT=docker

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL in Docker)
# =============================================================================
POSTGRES_DB=flask_auth
POSTGRES_USER=flask_user
POSTGRES_PASSWORD=secure_db_password_change_in_production
POSTGRES_PORT=5432

# Database URL for Flask (constructed automatically in docker-compose)
DATABASE_URL=postgresql://flask_user:secure_db_password_change_in_production@db:5432/flask_auth

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_PASSWORD=secure_redis_password_change_in_production
REDIS_PORT=6379
REDIS_URL=redis://:secure_redis_password_change_in_production@redis:6379/0
RATE_LIMIT_STORAGE_URL=redis://:secure_redis_password_change_in_production@redis:6379/1

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# Generate secure secrets with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=docker-secret-key-change-this-in-production-use-secure-random
JWT_SECRET_KEY=docker-jwt-secret-change-this-in-production-use-256-bits

# JWT Token Expiration (in seconds)
JWT_ACCESS_TOKEN_EXPIRES=3600        # 1 hour
JWT_REFRESH_TOKEN_EXPIRES=2592000    # 30 days

# Password Security
BCRYPT_LOG_ROUNDS=12
PASSWORD_MIN_LENGTH=8

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Update these URLs to match your frontend applications
CORS_ORIGINS=http://localhost:3000,http://localhost:8080,https://yourapp.com,https://admin.yourapp.com

# =============================================================================
# NGINX CONFIGURATION (if using reverse proxy)
# =============================================================================
NGINX_PORT=80
NGINX_SSL_PORT=443

# =============================================================================
# OPTIONAL SERVICES
# =============================================================================
# Adminer (PostgreSQL admin interface)
ADMINER_PORT=8080

# =============================================================================
# MONITORING & LOGGING
# =============================================================================
LOG_LEVEL=INFO
LOG_REQUESTS=True

# Health Check Configuration
HEALTH_CHECK_ENABLED=True
HEALTH_CHECK_DATABASE=True
HEALTH_CHECK_REDIS=True

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================
# Uncomment and customize these for production deployment

# Production Database (if using external database)
# DATABASE_URL=postgresql://user:password@external-db-host:5432/production_db

# Production Security (use strong, unique values)
# SECRET_KEY=your-production-secret-key-64-characters-long-and-random
# JWT_SECRET_KEY=your-production-jwt-secret-256-bits-extremely-secure

# Production CORS (restrict to your actual domains)
# CORS_ORIGINS=https://api.yourdomain.com,https://admin.yourdomain.com

# SSL/TLS Configuration (if using HTTPS)
# SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
# SSL_KEY_PATH=/etc/nginx/ssl/private.key

# =============================================================================
# DEVELOPMENT OVERRIDES
# =============================================================================
# Uncomment these for development environment

# FLASK_ENV=development
# FLASK_DEBUG=True
# POSTGRES_PASSWORD=postgres
# REDIS_PASSWORD=redis
# CORS_ORIGINS=http://localhost:3000,http://localhost:8080,http://127.0.0.1:3000

# =============================================================================
# DOCKER COMPOSE PROFILES
# =============================================================================
# Available profiles:
# - default: app, db, redis
# - development: + adminer
# - production: + nginx
# 
# Usage: docker-compose --profile development up
# Usage: docker-compose --profile production up